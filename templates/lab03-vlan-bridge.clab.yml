name: lab03-vlan-bridge

topology:
  nodes:
    br:
      kind: linux
      image: alpine:latest
      exec:
        - apk add --no-cache bridge-utils iproute2
        - ip link add br0 type bridge vlan_filtering 1
        - ip link set br0 up

    host1:
      kind: linux
      image: alpine:latest
      exec:
        - apk add --no-cache iproute2 iputils
        - ip addr add 10.10.10.1/24 dev eth1
        - ip link set eth1 up

    host2:
      kind: linux
      image: alpine:latest
      exec:
        - apk add --no-cache iproute2 iputils
        - ip addr add 10.20.20.1/24 dev eth1
        - ip link set eth1 up

  links:
    - endpoints: ["host1:eth1", "br:eth1"]
    - endpoints: ["host2:eth1", "br:eth2"]
